# Account-Book(ê°€ê³„ë¶€  RestApi)
## JPAë¥¼ ì´ìš©í•œ RestApi êµ¬í˜„ / Spring Security  ì¸ì¦,ì¸ê°€ / JWT í† í° / CI-CDêµ¬ì¶• 


***

## êµ¬í˜„ ì™„ë£Œ
**Function** | **ì™„ë£Œ** | 
:------------ | :-------------| 
**Swagger** | :heavy_check_mark: |  
**Spring Security ì¸ì¦ / ì¸ê°€ í•„í„° êµ¬í˜„** | :heavy_check_mark: |  
**íšŒì›ê°€ì… / ë¡œê·¸ì¸ êµ¬í˜„ (JWT í† í° ë°œê¸‰)** | :heavy_check_mark: |  
**ê°€ê³„ë¶€(AccountBook) ì‘ì„±, ìˆ˜ì •, ì‚­ì œ, ë¦¬ìŠ¤íŠ¸** | :heavy_check_mark: |  
**ê°€ê³„ë¶€ ê¸°ë¡(Record) ì‘ì„±, ìˆ˜ì •, ì‚­ì œ, ë³µì›,ë¦¬ìŠ¤íŠ¸** | :heavy_check_mark: |  
**ê°€ê³„ë¶€ ê¸°ë¡ ìˆ˜ì •, ì‚­ì œ, ë³µì› ì‹œ ê°€ê³„ë¶€ ì”ê³  ì •ìƒì ì¸ ê³„ì‚° ë¡œì§** | :heavy_check_mark: | 
**AWS EC2ì— Docker ë°°í¬** | :heavy_check_mark: |  
**Gitlab CI & Crontab CD** | :heavy_check_mark: 

# ERD ë‹¤ì´ì–´ê·¸ë¨
- **User : íšŒì› í…Œì´ë¸”**
- **Account_Book : ê°€ê³„ë¶€ í…Œì´ë¸”**
- **Record : ê°€ê³„ë¶€ ê¸°ë¡ í…Œì´ë¸”**
<img width="500" alt="ë‹¤ì´ì–´ê·¸ë¨" src="https://user-images.githubusercontent.com/104709432/211975196-96e9687a-32af-4ba7-bf7b-5f0b63fd9f14.PNG">



### í…ŒìŠ¤íŠ¸ ì „ìš© ë¡œê·¸ì¸ íšŒì›
**User**
> - email : test@gmail.com
>
> - PW : kk1234
<hr>

## ğŸ”½ RestAPI EndPoint

| METHOD | URI                                | ê¸°ëŠ¥               | RequestBody                                      |ì¸ì¦í•„ìš”             |
| ------ | ---------------------------------- |---------------------------| ------------------------------------- |----------- |
| POST   | /api/**users**/join                 | íšŒì›ê°€ì…                      | {"username": "string", "email":"string", "password":"string"} |  | 
| POST   | /api/**users**/login                | ë¡œê·¸ì¸                       | {"email": "string", "password":"string"} | | 
| GET    | /api/**account_books**                     |í•´ë‹¹ íšŒì›ì˜ ê°€ê³„ë¶€ ì „ì²´ ë¦¬ìŠ¤íŠ¸(ìµœì‹  ê°€ê³„ë¶€ 5ê°œ í˜ì´ì§• ì²˜ë¦¬)  |                                           | âœ”| 
| GET    | /api/**account_books**/{id}                     | ê°€ê³„ë¶€ ë‹¨ê±´ ì¡°íšŒ   |                                           |âœ” | 
| POST    | /api/**account_books**/{id}             | ê°€ê³„ë¶€ ìƒì„±             | {"title": "string", "memo":"string", "balance":"string"}                                           |âœ” | 
| PATCH   | /api/**account_books**/{id}                      | ê°€ê³„ë¶€ ìˆ˜ì •  |  {"title": "string", "memo":"string", "balance":"string"}   |âœ” | 
| DELETE    | /api/v1/**account_books**/{postId}             | ê°€ê³„ë¶€ ì‚­ì œ |   |âœ” | 
| GET | /api/account_books/{bookId}/**records**/{recordId}             | ê°€ê³„ë¶€ ê¸°ë¡ ì¡°íšŒ  |                                           | âœ”| 
| GET | /api/account_books/{bookId}/**records**           | ê°€ê³„ë¶€ ê¸°ë¡ ë¦¬ìŠ¤íŠ¸ ë³´ê¸°(ìµœì‹ ìˆœ,20ê°œ) |                                           |âœ” | 
| POST | /api/account_books/{bookId}/**records**/          | ê°€ê³„ë¶€ ê¸°ë¡ ì“°ê¸° |{"money": "string", "memo":"string", "act":"string", "expendType":"string", "day":"string"}                                           |âœ” | 
| PATCH |/api/account_books/{bookId}/**records**/{recordId}       | ê°€ê³„ë¶€ ê¸°ë¡ ìˆ˜ì •(with ê°€ê³„ë¶€ ì”ê³  ìˆ˜ì •) |{"money": "string", "memo":"string", "act":"string", "expendType":"string", "day":"string"}                                           |âœ” | 
| DELETE | /api/account_books/{bookId}/**records**/{recordId}            | ê°€ê³„ë¶€ ê¸°ë¡ ì‚­ì œí•˜ê¸°(with ê°€ê³„ë¶€ ì”ê³  ë³µì› ) |                                           |âœ” | 

## USER(íšŒì›)
### 1. íšŒì›ê°€ì… (POST) : /api/**users**/join 
> - ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬í•˜ì—¬ íšŒì›ê°€ì…
> - ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì§„í–‰ í›„ DBì— ì €ì¥
> - ì—”í‹°í‹°ì™€ DTOì˜ ë¶„ë¦¬ë¡œ API ìŠ¤í™ì˜ ìœ ì§€
 
 ### 2. ë¡œê·¸ì¸ (POST) : /api/**users**/login 
> - íšŒì›ê°€ì… ì§„í–‰ í›„ email ìœ ë¬´ í™•ì¸ 
> - ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜/ë¶ˆì¼ì¹˜ í™•ì¸ ì‘ì—…
> - ìœ„ 2ê°œì˜ ê²€ì¦ì´ ëë‚œ í›„ jwtì™€ refresh tokenì„ ë°˜í™˜
> - ì—”í‹°í‹°ì™€ DTOì˜ ë¶„ë¦¬ë¡œ API ìŠ¤í™ì˜ ìœ ì§€ 
 ## Account_Book(ê°€ê³„ë¶€)
  ### 3. ê°€ê³„ë¶€ ìƒì„± (POST) : /api/**account_books** 
> - ì¸ì¦ëœ ì‚¬ìš©ì ì¸ì§€ í™•ì¸
> - ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê³ ê°ì€ ê°€ê³„ë¶€ ë‚´ì—­ì— ëŒ€í•œ ì ‘ê·¼ ì œí•œ ì²˜ë¦¬
> - ê°€ê³„ë¶€ ì”ê³ (balance) , ì œëª©(title) , ë©”ëª¨(memo)ë¥¼ ì‘ì„±í•˜ì—¬ ê°€ê³„ë¶€ ìƒì„±
> - ì—”í‹°í‹°ì™€ DTOì˜ ë¶„ë¦¬ë¡œ API ìŠ¤í™ì˜ ìœ ì§€
   ### 4. ê°€ê³„ë¶€ ìˆ˜ì • (PATCH) : /api/**account_books**/{id} 
> - ì¸ì¦ëœ ì‚¬ìš©ì ì¸ì§€ í™•ì¸(ê°€ê³„ë¶€ ìƒì„±í•œ ì‚¬ëŒì¸ì§€ íƒ€ì¸ì¸ì§€ ê²€ì¦)
> - ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê³ ê°ì€ ê°€ê³„ë¶€ ìˆ˜ì •ì— ëŒ€í•œ ì ‘ê·¼ ì œí•œ ì²˜ë¦¬
> - idë¡œ í•´ë‹¹ ê°€ê³„ë¶€ ì¡°íšŒ í›„ Dirty checkë¥¼ ì´ìš©í•˜ì—¬ ê°€ê³„ë¶€ ì”ê³ (balance) , ì œëª©(title) , ë©”ëª¨(memo) ìˆ˜ì •
> - ì—”í‹°í‹°ì™€ DTOì˜ ë¶„ë¦¬ë¡œ API ìŠ¤í™ì˜ ìœ ì§€

 ### 5. ê°€ê³„ë¶€ ì‚­ì œ (DELETE) : /api/**account_books**/{id} 
> - ì¸ì¦ëœ ì‚¬ìš©ì ì¸ì§€ í™•ì¸(ê°€ê³„ë¶€ ìƒì„±í•œ ì‚¬ëŒì¸ì§€ íƒ€ì¸ì¸ì§€ ê²€ì¦)
> - ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê³ ê°ì€ ê°€ê³„ë¶€ ì‚­ì œì— ëŒ€í•œ ì ‘ê·¼ ì œí•œ ì²˜ë¦¬
> - idë¡œ í•´ë‹¹ ê°€ê³„ë¶€ ì¡°íšŒ í›„ í•´ë‹¹ ê°€ê³„ë¶€ ì‚­ì œ ì²˜ë¦¬

   ### 6. ê°€ê³„ë¶€ ë‹¨ê±´ ì¡°íšŒ (GET) : /api/**account_books**/{id} 
> - ì¸ì¦ëœ ì‚¬ìš©ì ì¸ì§€ í™•ì¸
> - ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê³ ê°ì€ ê°€ê³„ë¶€ ì¡°íšŒì— ëŒ€í•œ ì ‘ê·¼ ì œí•œ ì²˜ë¦¬
> - idë¡œ í•´ë‹¹ ê°€ê³„ë¶€ ì¡°íšŒ 
> - ì—”í‹°í‹°ì™€ DTOì˜ ë¶„ë¦¬ë¡œ API ìŠ¤í™ì˜ ìœ ì§€

   ### 7. ê°€ê³„ë¶€ ì „ì²´ ì¡°íšŒ (GET) : /api/**account_books**
> - ì¸ì¦ëœ ì‚¬ìš©ì ì¸ì§€ í™•ì¸
> - ìµœì‹ ìˆœìœ¼ë¡œ ì‘ì„±í•œ ê°€ê³„ë¶€ í˜ì´ì§• ì²˜ë¦¬ ì¡°íšŒ(COUNT : 5)
> - ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì¡°íšŒ í›„ ê°€ê³„ë¶€ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
> - ì—”í‹°í‹°ì™€ DTOì˜ ë¶„ë¦¬ë¡œ API ìŠ¤í™ì˜ ìœ ì§€
